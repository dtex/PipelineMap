<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD0EXQemEbu8j2xtlKWilob4Txtu67uoQs&sensor=true">
    </script>
   
    
    
    
  </head>
  <body>
    
    <div id="map_canvas" style="width:745px; height:419px;"></div>
    
    <script type="text/javascript">
      
      // Our configuration object
      var mapConfig = {
	      "googleMapsAPIKey": "AIzaSyD0EXQemEbu8j2xtlKWilob4Txtu67uoQs",
	      "startLat": 39.92130224355926, //39.750220991707636,
	      "startLong": -86.61766486740112, //-84.3315859375,
	      "startZoom": 18 //6
      }
      
      // Maps initialize function
      function initialize() {
        
        var mapOptions = {
          center: new google.maps.LatLng(mapConfig.startLat, mapConfig.startLong),
          zoom: mapConfig.startZoom,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
            
       var kml = new google.maps.KmlLayer('http://www.marathonpetroleum.com/content/includes/MPL_Pipeline.kmz');
       kml.preserveViewport = true;
       kml.suppressInfoWindows = true;
       kml.setMap(map);
      
       	//
       	google.maps.event.addListener(kml, 'click', function(kmlEvent) {
	       	showInDiv(kmlEvent.featureData);
	    });

	    function showInDiv(featureData) {
		    console.dir(featureData);
		}

		// Listen for the dragend event
		google.maps.event.addListener(map, 'dragend', function() {
		 
		 	var c = map.getCenter(),
		     x = c.lng(),
		     y = c.lat();
		     console.log('lng:'+x, 'lat:'+y);
		});
		
		// Limit the zoom level
		google.maps.event.addListener(map, 'zoom_changed', function() {
		 console.log('zoom: '+map.getZoom());
		 
		});
	  }
      
      initialize();
      
    </script>
    
    
  </body>
</html>


